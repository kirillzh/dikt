apply plugin: "java-gradle-plugin"
apply plugin: "org.jetbrains.kotlin.jvm"
apply plugin: "maven"

group = "com.github.sergeshustoff.dikt"
archivesBaseName = "dikt-gradle-plugin"
version = "$dikt_version"

install {
    dependsOn(':dikt-compiler-plugin:install')
    dependsOn(':dikt-compiler-plugin-native:install')
    repositories.mavenInstaller {
        pom.artifactId = archivesBaseName
    }
}

gradlePlugin {
    plugins {
        diktPlugin {
            id = "com.github.sergeshustoff.dikt"
            implementationClass = "dev.shustoff.dikt.gradle.DiktGradlePlugin"
        }
    }
}

dependencies {
    implementation "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"
    implementation "org.jetbrains.kotlin:kotlin-gradle-plugin-api:$kotlin_version"
    compileOnly "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
}